<div class="recipe-details-page">
  <h2> <%= @recipe.name%> </h2>
  <h3>Details</h3>

  <div class="recipe-details">
    <div class="recipe-prep-time_visibility">
      <p>
        <b>Preparation time:</b>
        <%= @recipe.preparation_time %>
        <% if @recipe.preparation_time == 1 %>
          hour
        <% else %>
          hours
        <%end%>
      </p>
      <div>
        <% if can?(:update, @recipe) %>
          <%= form_with(model: @recipe, url: toggle_public_recipe_path(@recipe), method: :patch) do |form| %>
            <% if @recipe.public %>
              <p>This recipe is public</p>
              <%= form.submit 'Make Private', class: "visibility-switch" %>
            <% else %>
              <p>This recipe is private</p>
              <%= form.submit 'Make Public', class: "visibility-switch" %>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>

    <div class="recipe-cooking-time">
      <p>
        <b>Cooking time:</b>
        <%= @recipe.cooking_time %>
        <% if @recipe.cooking_time == 1 %>
          hour
        <% else %>
          hours
        <%end%>
      </p>
    </div>

    <div class="recipe-description">
      <p>
        <b>Steps:</b>
        <br />
        <br />
        <%= @recipe.description %>
      </p>
    </div>

    <div class="recipe-actions">
      <button>Generate shopping list</button>
      <button>Add ingredient</button>
    </div>

    <hr />

    <table class="foods-table">
      <tr>
        <th>Name</th>
        <th>Measurement unit</th>
        <th>Quantity</th>
        <th>Unit price</th>
        <th>Actions</th>
        <th>View</th>
      </tr>
      <% @recipe.foods.each do |food| %>
        <tr>
          <td>
            <%= food.name %>
          </td>
          <td><%= food.measurement_unit %></td>
          <td><%= food.quantity %></td>
          <td>$<%= food.price %></td>
          <td><%= button_to "Delete", food, method: :delete, class: "delete-btn" %></td>
          <td><%= link_to "Show", food, class: "show-btn" %></td>
        </tr>
      <% end %>
    </table>
  </div>

</div>
